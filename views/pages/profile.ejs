<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= user.name %>'s Profile | Eventure</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen flex flex-col bg-gray-50">
    <%- include('../partials/header.ejs') %>

    <div class="container mx-auto px-4 py-8">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <!-- Left Column - Profile Info -->
            <div class="bg-white rounded-lg shadow p-6">
                <div class="flex flex-col items-center">
                    <img src="<%= user.photo %>" alt="Profile Picture" 
                         class="w-40 h-40 rounded-full object-cover mb-4">
                    <h2 class="text-2xl font-bold mb-1"><%= user.name %></h2>
                    <p class="text-gray-600 mb-4"><%= user.college_name %></p>
                    <p class="text-gray-700 mb-4">Rank: <%= user.rank || 420 %></p>
                    <a href="/profile/edit" 
                       class="w-full bg-blue-700 text-white py-2 rounded-lg hover:bg-blue-800 transition text-center">
                        Edit Profile
                    </a>
                </div>

                <!-- Clubs Following Section -->
                <div class="mt-8">
                    <h3 class="text-lg font-semibold mb-4">Followed Clubs:</h3>
                    <div class="grid grid-cols-3 gap-4">
                        <% user.following_clubs?.forEach(club => { %>
                            <a href="/club/<%= club.id %>" class="block">
                                <div class="bg-white rounded-xl shadow p-4 hover:shadow-lg transition-shadow">
                                  <img src="/images/club_logos/<%= club.logo %>" 
                                       alt="<%= club.name %>" 
                                       class="w-full h-20 object-contain mb-4"
                                       onerror="this.src='/images/club_logos/default_club_logo.png'" />
                                  <h3 class="text-lg font-semibold mb-2"><%= club.name %></h3>
                                </div>
                              </a>
                        <% }) %>
                    </div>
                </div>

                <!-- Followed Colleges Section -->
                <div class="bg-white rounded-lg shadow p-6 mt-6">
                    <h3 class="text-lg font-semibold mb-4">Followed Colleges</h3>
                    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
                        <% user.followed_colleges?.forEach(college => { %>
                            <a href="/college/<%= college.id %>" class="block group">
                                <div class="bg-gray-50 rounded-lg p-4 transition-all duration-300 hover:shadow-md">
                                    <img src="/images/college_logos/<%= college.name.toLowerCase().replace(/\s/g, '_') %>.png" 
                                         alt="<%= college.name %>"
                                         class="w-full h-20 object-contain mb-2"
                                         onerror="this.src='/images/college_logos/default-college-logo.png'">
                                    <p class="text-sm font-medium text-center text-gray-800 group-hover:text-blue-600 transition-colors">
                                        <%= college.name %>
                                    </p>
                                </div>
                            </a>
                        <% }) %>
                        <% if (!user.followed_colleges?.length) { %>
                            <p class="text-gray-500 col-span-full text-center py-4">
                                No colleges followed yet
                            </p>
                        <% } %>
                    </div>
                </div>
            </div>

            <!-- Right Column - Skills, Badges, Events -->
            <div class="md:col-span-2 space-y-8">
                <!-- Skills Section -->
                <div class="bg-white rounded-lg shadow p-6">
                    <h3 class="text-xl font-semibold mb-4">Skills</h3>
                    <div class="flex flex-wrap gap-4">
                        <% ['Web Dev', 'CP', 'ML & AI'].forEach(skill => { %>
                            <span class="px-6 py-2 bg-blue-700 text-white rounded-full">
                                <%= skill %>
                            </span>
                        <% }) %>
                    </div>
                </div>

                <!-- Badges Section -->
                <div class="bg-white rounded-lg shadow p-6">
                    <h3 class="text-xl font-semibold mb-4">Badges</h3>
                    <div class="flex flex-wrap gap-6">
                        <% ['beginner', 'intermediate', 'expert'].forEach(badge => { %>
                            <img src="/images/badges/badge.png" 
                                 alt="<%= badge %> badge"
                                 class="w-20 h-20 object-contain"
                                 onerror="this.src='/images/badges/default_badge.png'">
                        <% }) %>
                    </div>
                </div>

                <!-- Events Participated Section -->
                <div class="bg-white rounded-lg shadow p-6">
                    <h3 class="text-xl font-semibold mb-4">Events participated</h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <% if (user.participated_events && user.participated_events.length > 0) { %>
                            <% user.participated_events.forEach(event => { %>
                                <a href="/event/<%= event.id %>" class="block hover:transform hover:scale-105 transition-transform duration-200">
                                    <div class="bg-gray-100 rounded-lg p-2">
                                        <img src="/images/event_logos/<%= event.title.toLowerCase().replace(/\s/g, '_') %>.jpeg" 
                                             alt="<%= event.title %>"
                                             class="w-full h-24 object-cover rounded-lg"
                                             onerror="this.src='/images/event_logos/default-event-image.jpeg'">
                                    </div>
                                    <div class="p-4">
                                        <h3 class="text-lg font-bold truncate">
                                            <%= event.title %>
                                        </h3>
                                        <p class="text-sm text-gray-600">
                                            <%= event.college_name %>
                                        </p>
                                        <p class="text-sm text-gray-500 mt-1">
                                            ðŸ“… <%= event.formattedDate %>
                                        </p>
                                    </div>
                                </a>
                            <% }) %>
                        <% } else { %>
                            <p class="text-gray-500 col-span-full text-center py-4">
                                No events participated yet
                            </p>
                        <% } %>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>



